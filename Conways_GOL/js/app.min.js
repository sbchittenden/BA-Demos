"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),Gameboard=function(){function e(t,i){_classCallCheck(this,e),this.dimension=t,this.cellSize=i,this.board=document.getElementById("gameboard"),this.context=this.board.getContext("2d"),this.cells=this.seedCells(),this.canvasSize=this.dimension*this.cellSize,this.continueGame=!0}return _createClass(e,[{key:"setCanvasSize",value:function(){this.board.setAttribute("width",this.dimension),this.board.setAttribute("height",this.dimension)}},{key:"seedCells",value:function(){for(var e={},t=0;t<this.dimension;t+=this.cellSize)for(var i=0;i<this.dimension;i+=this.cellSize){var s=new Cell(t,i,Math.round(Math.random()));e[""+t+i]=s}return e}},{key:"populateGrid",value:function(){this.context.clearRect(0,0,this.canvasSize,this.canvasSize);for(var e in this.cells){var t=this.cells[e];if(1===t.alive){var i=t.coordinates[0],s=t.coordinates[1];this.context.fillStyle="rgba("+Math.round(255*Math.random())+","+Math.round(30*Math.random())+","+Math.round(100*Math.random())+", "+Math.round(100*Math.random())+")",this.context.fillRect(i,s,this.cellSize,this.cellSize)}}}},{key:"getCellNeighbors",value:function(){for(var e in this.cells){var t=this.cells[e],i=t.coordinates[0],s=t.coordinates[1];t.neighborTotal=0,t.neighbors.topLeft=this.cells[""+(i-this.cellSize)+(s-this.cellSize)],t.neighbors.topMiddle=this.cells[""+(i-this.cellSize)+s],t.neighbors.topRight=this.cells[""+(i-this.cellSize)+(s+this.cellSize)],t.neighbors.middleLeft=this.cells[""+i+(s-this.cellSize)],t.neighbors.middleRight=this.cells[""+i+(s+this.cellSize)],t.neighbors.bottomLeft=this.cells[""+(i+this.cellSize)+(s-this.cellSize)],t.neighbors.bottomMiddle=this.cells[""+(i+this.cellSize)+s],t.neighbors.bottomRight=this.cells[""+(i+this.cellSize)+(s+this.cellSize)]}}},{key:"getNieghborStatus",value:function(){for(var e in this.cells){var t=this.cells[e];t.neighborTotal=0;for(var i in t.neighbors)if(void 0!==i){var s=t.neighbors[i];void 0!==s&&(t.neighborTotal+=s.alive)}}}},{key:"updateLife",value:function(){for(var e in this.cells){var t=this.cells[e];t.allFieldTotal=0,t.allFieldTotal=t.alive+t.neighborTotal}for(var i in this.cells){var s=this.cells[i],l=s.allFieldTotal;3===l?s.alive=1:4!==l&&(s.alive=0)}}},{key:"iterateGeneration",value:function(){!0===this.continueGame&&(this.updateLife(),this.getNieghborStatus(),this.populateGrid(),window.requestAnimationFrame(this.iterateGeneration.bind(this)))}},{key:"setUpBoard",value:function(){this.setCanvasSize(),this.getCellNeighbors(),this.getNieghborStatus(),this.populateGrid()}},{key:"startGame",value:function(){this.iterateGeneration()}}]),e}(),Cell=function e(t,i,s){_classCallCheck(this,e),this.coordinates=[t,i],this.alive=s,this.neighbors={},this.neighborTotal=0};!function(){var e=document.getElementById("gameboard"),t=document.querySelector(".start-screen__wrapper"),i=document.querySelector(".init-btn"),s=document.getElementById("cell-size"),l=document.getElementById("board-dimension"),n=document.querySelector(".start-btn"),a=document.querySelector(".end-btn"),o=document.querySelector(".reset-btn"),r=void 0;i.addEventListener("click",function(){var i=parseInt(l.value),a=parseInt(s.value);t.classList.add("--is-hidden"),n.classList.remove("--is-hidden"),e.classList.remove("--is-hidden"),(r=new Gameboard(i,a)).setUpBoard(),console.log(r)}),n.addEventListener("click",function(){n.classList.add("--is-hidden"),a.classList.remove("--is-hidden"),window.setTimeout(r.startGame(),1e3)}),a.addEventListener("click",function(){r.continueGame=!1,a.classList.add("--is-hidden"),o.classList.remove("--is-hidden")}),o.addEventListener("click",function(){r.context.clearRect(0,0,r.canvasSize,r.canvasSize),r=void 0,l.value="",s.value="",o.classList.add("--is-hidden"),t.classList.remove("--is-hidden")})}();